# v11 — Branching narrative with 3 paths and 3 endings

**Category:** feature

## Changes

- 3 behavioral paths detected by play style: Hunter (kills≥5), Ghost (depth≥3 with ≤2 kills), Archivist (data≥60)
- 3 unique victory endings: Extraction (hunter), Integration (ghost), Transcendence (archivist)
- 1 death ending: Shutdown (player dies)
- Path-specific climax events: hunter_climax (kills≥15), ghost_climax (depth≥4, kills≤4), archivist_climax (data≥120)
- 19 narrative nodes across 4 acts: Awakening → Divergence → Deepening → Climax → Endings
- Game over screen shows path-specific title, color, and narrative text
- Protocol label shown on game over (HUNTER / GHOST / ARCHIVIST)
- Narrative triggers: first kill, first data core, hull critical (<30% HP), floor cleared, descent, core sector, director encounter

## Reasoning

Player requested branching narrative with 3 decision paths and 3 alternative endings. Rather than explicit choices (which break roguelike flow), paths are detected from play behavior — aggressive players become Hunters, stealthy players become Ghosts, collectors become Archivists. Each path has its own climax event and ending, giving real replay value. The narrative graph connects all nodes with proper edges for the narrative panel visualization.

## Files modified

- `data.js` — 19 narrative nodes (4 acts), graph edges, narrativeText messages for all nodes
- `game.js` — `checkPath()`, `checkClimax()`, `chooseEnding()`, `endGame(victory, endingNode)`, screen state 'victory'/'shutdown'
- `render.js` — endingTitles lookup by endingNode, path-specific game over screen, protocol label
- `main.js` — updated restart check from 'extraction' to 'victory'
