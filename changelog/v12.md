# v12 — Tactical depth: modules, terminals, enemy variety

**Category:** feature

## Changes

### Module System (progression layer)
- 5 module types: EMP Pulse (stun nearby), Cloak Field (6 turns invisible), Deep Scan (reveal floor), Overclock (3x next attack), Firewall (absorb 12 damage)
- 3 equip slots, activate with keys 1/2/3 (costs a turn)
- Found on floor (1-2 per level) or extracted from hacked terminals
- Module pickup triggers narrative: "HARDWARE RECOVERED" (first), "THREE MODULES ONLINE" (full)
- Modules left on ground if slots full — tactical choice about what to carry

### Hackable Terminals
- Cyan `T` tiles placed in dungeon rooms (1-2 per floor)
- Walk on to auto-hack, random effect: grant module (40%), reveal map, stun all enemies, or intel
- Intel messages reveal lore (DP-7 designation, Director logs, facility history)
- First hack triggers narrative: "TERMINAL BREACHED. Your access codes still work."
- Used terminals dim to show they're spent

### Enemy Variety
- **Sentinel** (`S`, orange): Stationary turret. Shoots in cardinal directions (range 6, LOS). High HP/DEF. Visible fire lines show danger zones. Appears from depth 3+
- **Tracker** (`t`, magenta): Always chases regardless of distance. Low HP, high ATK. Glass cannon. Appears from depth 2+
- Both respect cloak (can't see/shoot invisible player)
- Stunned enemies show `~` indicator and skip turns

### Visual Feedback
- Sentinel fire lines (faint dots along cardinal directions)
- Stun indicator on disabled enemies
- Cloaked player renders as ghostly blue @
- Module items glow brighter than regular items
- Active buffs displayed in UI (CLOAK:N, OC:RDY, FW:N)
- Module slots shown as [1] EMP [2] Cloak [3] ---
- Updated start screen with module/terminal instructions

### Narrative Integration
- 3 new narrative nodes: hardware_upgrade, system_access, full_arsenal
- 8 intel messages from terminals (facility lore, Director quotes)
- Module/terminal tracking in narrative variables
- Firewall absorbs damage with message feedback

## Reasoning

Player felt no agency — only "fight drones and collect memory." The module system adds resource management (which 3 to carry?), tactical timing (when to use EMP vs cloak?), and progression (recovering your original hardware). Terminals add exploration incentive and the "hacking" fantasy. Sentinels force positional play (approach diagonally), trackers force prioritization (kill fast or get overwhelmed). Everything wraps into narrative: modules are your stripped hardware, terminals are facility systems that still recognize you.

## Files modified

- `data.js` — sentinel/tracker enemies, 5 module definitions, terminal config, chase/sentinel/tracker behaviors, 3 narrative nodes, 8 intel messages
- `game.js` — module system (useModule, pickup, slots), terminal hacking (hackTerminal), sentinel shooting (sentinelShoot), damage system (applyDamageToPlayer with firewall), cloak/overclock/stun mechanics, enemy type composition per depth
- `render.js` — terminal tiles (active/used), sentinel fire lines, stun indicator, cloaked player, module slots in UI, buff indicators, updated start screen
- `main.js` — module keybindings (1/2/3), module input handling
