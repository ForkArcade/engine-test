# v15 — Gameplay log + dynamic effects system

**Category:** feature

## Changes

### Gameplay log
- Color-coded messages by type: combat (red), pickups (green), system/modules (yellow/blue), hacks (cyan), narrative (purple)
- 6 messages visible (up from 5), tighter 10px spacing
- Auto-detection: message content determines color — no manual tagging needed

### Screen shake
- Camera shakes on player damage (intensity 6, decays over ~500ms)
- Applied to entire render pipeline via canvas translate — everything shakes including UI for "system error" feel

### Kill burst particles
- 8 particles explode outward on enemy death, colored to match the enemy type
- Particles decelerate and fade over 500ms

### Sound wave visualization
- Expanding yellow ring shows sound propagation radius when combat occurs
- Visible on melee (r=8), sentinel fire (r=10), and EMP (r=12)
- Fades over 500ms, gives player tactical feedback on which enemies were alerted

### Facility alert system
- Red tint overlay proportional to how many enemies are in hunting state
- More hunters = more red = facility is onto you
- Depth corruption: random glitch bars (colored scan artifacts) increase with depth level
- Floor 1 = nearly clean, Floor 5 = frequent visual corruption

## Reasoning

Player wanted a clear gameplay log and dynamic visual effects that make the facility feel alive and reactive. The color-coded log makes combat, pickups, and system events instantly distinguishable at a glance. The effects system creates a feedback loop: combat → shake + particles + sound wave → enemies alerted → red tint increases → player feels the facility tightening around them. Depth corruption reinforces that deeper = more dangerous. Every visual effect serves a gameplay purpose (sound waves show alert radius, red tint shows awareness level).

## Files modified

- `game.js` — addMessage with auto-color detection, shake/particles/soundWaves state, kill particles in attackEnemy, sound wave in propagateSound, shake trigger in applyDamageToPlayer
- `render.js` — color-coded log rendering, new effects layer (z=18) with alert tint, glitch bars, sound wave rings, kill particles
- `main.js` — shake decay + particle physics + sound wave lifecycle in update loop, camera shake via ctx.translate in render function
