# v3 — 3D first-person view (raycasting)

**Issue:** [#1 3d?](https://github.com/ForkArcade/engine-test/issues/1)
**Category:** feature

## Changes

- Added raycasting pseudo-3D first-person view (Wolfenstein-style)
- Toggle between 2D top-down and 3D first-person with **Tab** key
- DDA raycasting algorithm for efficient wall rendering
- Distance-based lighting with fog falloff
- Side-shading (walls hit from the side are darker)
- Enemies and items rendered as billboarded sprites in 3D with distance-based alpha
- Minimap overlay in 3D mode (bottom-left corner) showing map, player position, and enemy positions
- View mode hint shown in both 2D and 3D modes
- Player facing direction updates with movement

## Reasoning

Player requested 3D rendering. Raycasting is the natural fit for a tile-based roguelike — it reuses the existing 2D map grid directly as the 3D world with zero additional data. The DDA algorithm is fast (steps through grid cells, not pixel increments) and handles arbitrarily long corridors. The 3D view is purely visual — game mechanics (turn-based movement, combat) remain unchanged. Toggle allows players to switch freely between perspectives.

## Files modified

- `data.js` — added FOV, renderDist config; wall RGB and ceiling/floor colors
- `game.js` — player angle tracking on movement, viewMode state, toggleView function
- `render.js` — raycaster (castRay DDA), 3D layer with walls/sprites/minimap, view mode conditions on 2D layers
- `main.js` — Tab keybinding for view toggle
